<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pknu.music.dao.UserDao">	
	<insert id="insertUser" parameterType="map">
		insert into Users
		values(#{id},#{passwd},#{email},#{authority},#{enabled})
	</insert>
	
	<select id="selectBoardLists" parameterType="paginDto" resultType="boardDto">
		  	select *
  			from( select ROWNUM RNUM,P.* 
  				  from( select *		
  				  		from BOARD natural join BOARD_FILE 
  				  		ORDER BY RELEASEDATE DESC)P
  				  		WHERE ROWID IN(SELECT MAX(ROWID) FROM BOARD_FILE GROUP BY BOARDNUM))
  			where RNUM BETWEEN #{start} AND #{last}
	</select>
	
	<select id="selectTotalPagin" resultType="int">
		select count(*) from board
	</select>
	
	<select id="getContent" resultType="boardDto" parameterType="boardDto" >
		select *
		from BOARD
		where BOARDNUM=#{boardNum}
	</select>
	
</mapper>